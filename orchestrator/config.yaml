models:
  # The default model used for agent invocations unless overridden by routing rules.
  # Must match the name field of one of the entries in the list below.
  default: "kimi-k2"
  list:
    - name: "kimi-k2"
      # OpenRouter model strings use the format: openrouter/<provider>/<model-name>
      # Full list: https://openrouter.ai/models
      model: "openrouter/moonshotai/kimi-k2.5"
      api_key_env: "OPENROUTER_API_KEY"
    - name: "llama3"
      model: "ollama/llama3.2"
      api_key_env: ""
    - name: "claude-sonnet"
      model: "anthropic/claude-sonnet-4-6"
      api_key_env: "ANTHROPIC_API_KEY"
  routing:
    # Use local model for lightweight tasks, remote for complex reasoning.
    local_for: ["summarize", "classify", "reflect"]
    remote_for: ["dev", "research", "plan"]

paths:
  # Paths are evaluated relative to the orchestrator/ working directory.
  # The parent directory is included so agents can read ARCHITECTURE.md
  # and CLAUDE.md at the project root.
  allowed_read:
    - "./"
    - "../"
  allowed_write:
    - "./"
  db: "./storage/orchestrator.db"
  logs: "./logs/"

tools:
  shell_allowlist:
    - "pytest"
    - "python"
    - "git"
    - "ls"
    - "cat"
    - "grep"

agents:
  task_agent:
    allowed_tools:
      - "read_file"
      - "notify_user"
    max_iterations: 10
    approval_required_for: ["high"]
  dev_agent:
    allowed_tools:
      - "read_file"
      - "write_file"
      - "git_status"
      - "git_commit"
      - "git_branch"
      - "git_rollback"
      - "run_tests"
      - "notify_user"
      - "read_task_list"
      - "write_task"
    max_iterations: 10
    approval_required_for: ["high"]

approval:
  # Terminal mode: blocks on stdin prompt. Replaced in later phases.
  mode: "terminal"

debug:
  # Print every message array sent to the model. Useful during development;
  # disable in production to avoid leaking context to stdout.
  print_prompts: true

context:
  recent_buffer_tokens: 4000
  summary_tokens: 1000
  brief_tokens: 500
